<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
.btn {
  border: none;
  background-color: inherit;
  padding: 14px 28px;
  font-size: 16px;
  cursor: pointer;
  display: inline-block;
}

/* Green */
.green {
  color: green;
}

.green:hover {
  background-color: #4CAF50;
  color: white;
}

/* Red */
.red {
  color: red;
}

.red:hover {
  background: #f44336;
  color: white;
}

/* Gray */
.default {
  color: black;
}

.default:hover {
  background: #e7e7e7;
}

.hidden
{
    color: black;
    visibility:hidden;
}
</style>
<body onload="newBear()">
<!-- Content will go here -->

<button onclick="reset()" class="btn red">Scrap the Team</button>
<button onclick="newBear()" class="btn green">Recruit a Bear</button>

<h1 id="header-output">  </h1>
<p id="bear-output" style="font-size:160%;"></p>
<p id="skill-output" style="font-size:160%;"></p>
<p id="job-output" style="font-size:160%;"></p>

<footer>
    <button onclick="showBear(bears[0])" style="font-size:130%;" class="btn hidden" id="bear-button-1">Bear 1</button>
    <button onclick="showBear(bears[1])" style="font-size:130%;" class="btn hidden" id="bear-button-2">Bear 2</button>
    <button onclick="showBear(bears[2])" style="font-size:130%;" class="btn hidden" id="bear-button-3">Bear 3</button>
    <button onclick="showBear(bears[3])" style="font-size:130%;" class="btn hidden" id="bear-button-4">Bear 4</button>
    <button onclick="showBear(bears[4])" style="font-size:130%;" class="btn hidden" id="bear-button-5">Bear 5</button>
    <button onclick="showBear(bears[5])" style="font-size:130%;" class="btn hidden" id="bear-button-6">Bear 6</button>
    <p id="footer-credits" style="font-size:120%;">A party generator for <a href="https://gshowitt.itch.io/honey-heist">Honey Heist</a> a game by <a href="https://www.patreon.com/gshowitt">Grant Howitt</a>.</p>
</footer>

<script>
    var rolelist = ["Muscle","Brains","Driver","Hacker","Thief","Face"];
    var descriptors = ["Rookie","Washed-Up","Retired","Unhinged","Slick","Incompetent"];
    var beartypes = 
        [
            {
                name:"Grizzly Bear",
                skill:"terrifing"
            },{
                name:"Polar Bear",
                skill:"swimming"
            },{
                name:"Panda Bear",
                skill:"eating anything that looks like bamboo"
            },{
                name:"Black Bear",
                skill:"climbing"
            },{
                name:"Sun Bear",
                skill:"sensing honey"
            },{
                name:"Honey Badger",
                skill:"inflicting carnage"
            }
        ];
    var recruittext = ["Joining you is a","You hit the dive bar and come up with a","Also along is your old friend, a","You need the best, so you call in a","Of course, for this plan to work, you're going to need a"];
    var hatlist = ["Trilby","Top Hat","Bowler","Flat-Cap","Cowboy Hat","Fez","Crown","Bonus"];
    var actualhats = hatlist.slice(0,hatlist.length);
    var bears = [];

    function getHatString() {
        let hs = "";
        let hatnum = Math.floor(Math.random()*hatlist.length);
        if(hatnum === hatlist.length - 1) {
            let hatnumone = Math.floor((Math.random()*(actualhats.length-1)));
            let hatnumtwo = Math.floor((Math.random()*(actualhats.length-1)));
            while(hatnumtwo === hatnumone) hatnumtwo = Math.floor((Math.random()*(actualhats.length-1)));
            return hatlist[hatnumone] + " with a " + hatlist[hatnumtwo] + " perched on top";
        }
        return hatlist[hatnum];
    }

    function buildBear(rolenum) {
        let bearobj = {
        role: rolelist[rolenum],
        descriptor: descriptors[Math.floor(Math.random()*descriptors.length)],
        beartype: beartypes[Math.floor(Math.random()*beartypes.length)],
        hatstring: getHatString(),
        extrachar: "",
        num: bears.length,
        rt: "",
        pronoun: "you"
        };

        if(bearobj.descriptor === "Unhinged" || bearobj.descriptor === "Incompetent") bearobj.extrachar = "n";

        if(bears.length === 0) {bearobj.rt = "Behind the heist, the first one to come up with the idea, you are a" + bearobj.extrachar + "...";}
        else if (bears.length >= 1) {
            bearobj.rt = recruittext[Math.floor(Math.random()*recruittext.length)] + bearobj.extrachar + "...";
            bearobj.pronoun = "they";
        }

        return bearobj;
    }

    function newBear() {
        let roleroll = Math.floor(Math.random()*rolelist.length);
        let bear = buildBear(roleroll);
        if(rolelist.length === 0) {
            document.getElementById("header-output").innerHTML = "All Roles Assigned!  Select &#39;Start Over&#39; to reset roles available.";
            document.getElementById("bear-output").innerHTML = "";
            document.getElementById("skill-output").innerHTML = "";
            document.getElementById("job-output").innerHTML = "";
            return; 
        }
        rolelist.splice(roleroll,1);
        bears.push(bear);
        showBear(bear);
        document.getElementById("bear-button-"+bears.length.toString()).innerHTML=bear.role.bold();
        document.getElementById("bear-button-"+bears.length.toString()).className="btn default";
    }

    function showBear(bear) {
        if(typeof bear !== null) {        
            document.getElementById("header-output").innerHTML = bear.rt;
            document.getElementById("bear-output").innerHTML = bear.descriptor.bold() + " " + bear.beartype.name.bold() + ", wearing a " + bear.hatstring.bold() + ".";
            document.getElementById("skill-output").innerHTML = "As a " + bear.beartype.name + ", " + bear.pronoun + " have a special talent for " + bear.beartype.skill.bold() + ",";
            document.getElementById("job-output").innerHTML = "but for this job, " + bear.pronoun + " came along as the " + bear.role.bold() + "!";
        }
    }

    function reset() {
        document.getElementById("header-output").innerHTML = "";
        document.getElementById("bear-output").innerHTML = "";
        document.getElementById("skill-output").innerHTML = "";
        document.getElementById("job-output").innerHTML = "";
        rolelist = ["Muscle","Brains","Driver","Hacker","Thief","Face"];
        for(let i = 1;i<=6;i++) document.getElementById("bear-button-"+i).className="btn hidden";
        bears = [];
        newBear();
    }
    </script>
</body>
</html>