<!DOCTYPE html>
<html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
.btn {
  border: none;
  background-color: inherit;
  padding: 14px 28px;
  font-size: 16px;
  cursor: pointer;
  display: inline-block;
}

/* Green */
.green {
  color: green;
}

.green:hover {
  background-color: #4CAF50;
  color: white;
}

/* Red */
.red {
  color: red;
}

.red:hover {
  background: #f44336;
  color: white;
}

/* Gray */
.default {
  color: black;
}

.default:hover {
  background: #e7e7e7;
}

.hidden
{
    color: black;
    visibility:hidden;
}
</style>
<body onload="newBear()">

<button onclick="reset()" class="btn red">Scrap the Team</button>
<button onclick="newBear()" class="btn green">Recruit a Bear</button>

<h1 id="header-output">  </h1>
<p id="bear-output" style="font-size:160%;"></p>
<p id="skill-output" style="font-size:160%;"></p>
<p id="job-output" style="font-size:160%;"></p>

<footer>
    <button onclick="showBear(bears[0])" style="font-size:130%;" class="btn hidden" id="bear-button-1">Bear 1</button>
    <button onclick="showBear(bears[1])" style="font-size:130%;" class="btn hidden" id="bear-button-2">Bear 2</button>
    <button onclick="showBear(bears[2])" style="font-size:130%;" class="btn hidden" id="bear-button-3">Bear 3</button>
    <button onclick="showBear(bears[3])" style="font-size:130%;" class="btn hidden" id="bear-button-4">Bear 4</button>
    <button onclick="showBear(bears[4])" style="font-size:130%;" class="btn hidden" id="bear-button-5">Bear 5</button>
    <button onclick="showBear(bears[5])" style="font-size:130%;" class="btn hidden" id="bear-button-6">Bear 6</button>
    <p id="footer-credits" style="font-size:120%;">A party generator for <a href="https://gshowitt.itch.io/honey-heist">Honey Heist</a> a game by <a href="https://www.patreon.com/gshowitt">Grant Howitt</a>.</p>
</footer>

<script>
    const rolemaster = ["The Muscle","The Brains","The Driver","The Hacker","The Thief","The Face"]
    var rolelist = rolemaster.slice(0);
    const masterdescriptors = ["Rookie","Washed-Up","Retired","Unhinged","Slick","Clumsy","Freelance","Reluctant","Hyperactive","Gregarious","Mysterious","Experienced","Reliable",
    "Excitable","Laid-Back","Cool","Shrewd","Straight-Shootin'","Maverick","Cautious","Innocuous","Bold"];
    var descriptors = masterdescriptors.slice(0);
    const recruitmaster = [
        "Joining you is a",
        "You hit the dive bar and come up with a",
        "Also along is your old friend, a",
        "You need the best, so you call in a",
        "Of course, for this plan to work, you're going to need a",
        "One of your contacts recommended a",
        "Through the grapevine you heard about a",
        "You received an unsolicited resume from a",
        "Your first choice passed, but instead recommended a"
    ];
    recruittext = recruitmaster.slice(0);
    const hatlist = ["Trilby","Top Hat","Bowler","Flat-Cap","Stetson","Fez","Crown","Beret","Beanie","Baseball Hat","Turban","Deerstalker Cap","Pith Helmet","Ushanka",
    "Sombrero","Tricorne","Balmoral Bonnet","Campaign hat","Fascinator","Hard Hat","Wimple","Yarmulke","Mitre","Panama Hat","Pillbox Hat","Porkpie Hat","Santa Hat","Sun Hat",
    "Chef's Hat","Wizard's Hat","Rainbow Clown Wig","Beer Hat","Blond Toupee","Blonde Wig","Crown of Daisies","Wreath of Laurels","Pair of Cat Ears","Pair of Bunny Ears","Tiara",
    "Complete Native American Headdress","Glass Diving Bell","1950s Style Astronaut Helmet","Tinfoil Hat","Comedy Arrow Headband"];
    const doublehatchance = 12.5;
    const beartypes = 
        [
            {
                name:"Grizzly Bear",
                skill:"terrifying",
                url:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/33/Jasper_Dwayne_Reilander-4.jpg/1920px-Jasper_Dwayne_Reilander-4.jpg"
            },{
                name:"Polar Bear",
                skill:"swimming",
                url:"https://upload.wikimedia.org/wikipedia/commons/6/66/Polar_Bear_-_Alaska_%28cropped%29.jpg"
            },{
                name:"Panda Bear",
                skill:"eating anything that looks like bamboo",
                url:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0f/Grosser_Panda.JPG/1920px-Grosser_Panda.JPG"
            },{
                name:"Black Bear",
                skill:"climbing",
                url:"https://upload.wikimedia.org/wikipedia/commons/0/08/01_Schwarzb%C3%A4r.jpg"
            },{
                name:"Sun Bear",
                skill:"sensing honey",
                url:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/Sitting_sun_bear.jpg/800px-Sitting_sun_bear.jpg"
            },{
                name:"Honey Badger",
                skill:"carnage",
                url:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/52/Mellivora_capensis_in_Howletts_Wild_Animal_Park.jpg/1280px-Mellivora_capensis_in_Howletts_Wild_Animal_Park.jpg"
            },{
                name:"Red Panda",
                skill:"distraction",
                url:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/50/RedPandaFullBody.JPG/1280px-RedPandaFullBody.JPG"
            },{
                name:"Grolar Bear",
                skill:"scavenging",
                url:"https://upload.wikimedia.org/wikipedia/commons/7/7e/Grolar.JPG"
            },{
                name:"Sloth Bear",
                skill:"mimicry",
                url:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/Sloth_Bear_Washington_DC.JPG/1280px-Sloth_Bear_Washington_DC.JPG"
            }
        ];
    var bears = [];

    function getHatString() {
        let hs = "";
        let hatnumone = Math.floor(Math.random()*hatlist.length);
        let string = hatlist[hatnumone];
        let hatn = "";
        if(Math.random()*100 <= doublehatchance) {
            let hatnumtwo = Math.floor((Math.random()*(hatlist.length)));
            while(hatnumtwo === hatnumone) hatnumtwo = Math.floor((Math.random()*(hatlist.length)));
            if(hatlist[hatnumtwo].charAt(0) === "A" || hatlist[hatnumtwo].charAt(0) === "E" || hatlist[hatnumtwo].charAt(0) === "I" || hatlist[hatnumtwo].charAt(0) === "O") hatn = "n"
            return hatlist[hatnumone] + " AND a" + hatn + " " + hatlist[hatnumtwo];
        }
        return string;
    }

    function buildBear(rolenum) {
        let bearobj = {
        role: rolelist[rolenum],
        descriptor: "" + descriptors.splice(Math.floor(Math.random()*descriptors.length),1),
        beartype: beartypes[Math.floor(Math.random()*beartypes.length)],
        hatstring: getHatString(),
        extrachar: "",
        num: bears.length,
        rt: "",
        pronoun: "you"
        };

        if(bearobj.descriptor.charAt(0) === "A" || bearobj.descriptor.charAt(0) === "E" || bearobj.descriptor.charAt(0) === "I" || bearobj.descriptor.charAt(0) === "O"|| bearobj.descriptor.charAt(0) === "U") bearobj.extrachar = "n";

        if(bears.length === 0) {bearobj.rt = "Behind the heist, the first one to come up with the idea, you are a" + bearobj.extrachar + "...";}
        else if (bears.length >= 1) {
            bearobj.rt = recruittext.splice(Math.floor(Math.random()*recruittext.length),1) + bearobj.extrachar + "...";
            bearobj.pronoun = "they";
        }

        return bearobj;
    }

    function newBear() {
        let roleroll = Math.floor(Math.random()*rolelist.length);
        let bear = buildBear(roleroll);
        if(rolelist.length === 0) {
            document.getElementById("header-output").innerHTML = "All Roles Assigned!  Review the team with the buttons below, or " + "Scrap the Team".fontcolor("red") + " to start over.";
            document.getElementById("bear-output").innerHTML = "";
            document.getElementById("skill-output").innerHTML = "";
            document.getElementById("job-output").innerHTML = "";
            return; 
        }
        rolelist.splice(roleroll,1);
        bears.push(bear);
        showBear(bear);
        document.getElementById("bear-button-"+bears.length.toString()).innerHTML=bear.role.bold();
        document.getElementById("bear-button-"+bears.length.toString()).className="btn default";
    }

    function showBear(bear) {
        if(typeof bear !== null) {
            let hatn = "";
            document.getElementById("header-output").innerHTML = bear.rt;
            if(bear.hatstring.charAt(0) === "A" || bear.hatstring.charAt(0) === "E" || bear.hatstring.charAt(0) === "I" || bear.hatstring.charAt(0) === "O") hatn = "n"
            document.getElementById("bear-output").innerHTML = bear.descriptor.bold() + " " + bear.beartype.name.bold().link(bear.beartype.url) + ", wearing a" + hatn + " " + bear.hatstring.bold() + ".";
            document.getElementById("skill-output").innerHTML = "As a " + bear.beartype.name + ", " + bear.pronoun + " have a special talent for " + bear.beartype.skill.bold() + ".";
            document.getElementById("job-output").innerHTML = "For this job, " + bear.pronoun + " came along as " + bear.role.bold() + "!";
        }
    }

    function reset() {
        document.getElementById("header-output").innerHTML = "";
        document.getElementById("bear-output").innerHTML = "";
        document.getElementById("skill-output").innerHTML = "";
        document.getElementById("job-output").innerHTML = "";
        rolelist = rolemaster.slice(0);
        recruittext = recruitmaster.slice(0);
        descriptors = masterdescriptors.slice(0);
        for(let i = 1;i<=6;i++) document.getElementById("bear-button-"+i).className="btn hidden";
        bears = [];
        newBear();
    }
    </script>
</body>
</html>